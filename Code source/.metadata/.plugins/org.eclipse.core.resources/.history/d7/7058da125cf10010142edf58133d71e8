import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import java.io.*;
import java.util.ArrayList;

public class File {

    private JFrame frame;
    private JTable table;           // Tableau principal de Main
    private DefaultTableModel tableModel;

    public File(JTable table) {
        this.table = table;
        this.tableModel = (DefaultTableModel) table.getModel();
        openFileDialog();
    }

    private void openFileDialog() {
        JFileChooser fileChooser = new JFileChooser();
        fileChooser.setDialogTitle("Select a .dat file");
        int userSelection = fileChooser.showOpenDialog(null);

        if (userSelection == JFileChooser.APPROVE_OPTION) {
            java.io.File selectedFile = fileChooser.getSelectedFile();
            readFile(selectedFile);
        }
    }

    private void readFile(java.io.File file) {
        try (BufferedReader br = new BufferedReader(new FileReader(file))) {
            String line;
            ArrayList<Double> valuesN = new ArrayList<>();

            while ((line = br.readLine()) != null) {
                line = line.trim();
                if (!line.isEmpty()) {
                    try {
                        double val = Double.parseDouble(line);
                        valuesN.add(val);
                    } catch (NumberFormatException e) {
                        // Ignorer les lignes non num√©riques
                        continue;
                    }
                }
            }

            // Remplir le tableau Main
            tableModel.setRowCount(0); // vider le tableau
            int index = 1;
            for (double n : valuesN) {
                tableModel.addRow(new Object[]{index++, n, Math.sqrt(n)});
            }

        } catch (IOException e) {
            JOptionPane.showMessageDialog(null, "Error reading file: " + e.getMessage());
        }
    }
}
